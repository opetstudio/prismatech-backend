"use strict";var _slicedToArray=function(e,t){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return function(e,t){var a=[],n=!0,i=!1,r=void 0;try{for(var o,c=e[Symbol.iterator]();!(n=(o=c.next()).done)&&(a.push(o.value),!t||a.length!==t);n=!0);}catch(e){i=!0,r=e}finally{try{!n&&c.return&&c.return()}finally{if(i)throw r}}return a}(e,t);throw new TypeError("Invalid attempt to destructure non-iterable instance")};function _defineProperty(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}var _MaterialUI=MaterialUI,makeStyles=_MaterialUI.makeStyles,Paper=_MaterialUI.Paper,Grid=_MaterialUI.Grid,Card=_MaterialUI.Card,CardMedia=_MaterialUI.CardMedia,Button=_MaterialUI.Button,Skeleton=_MaterialUI.Skeleton,Container=_MaterialUI.Container,Carousel=_MaterialUI.Carousel,ButtonGroup=_MaterialUI.ButtonGroup,InputBase=_MaterialUI.InputBase,CardContent=_MaterialUI.CardContent,Box=_MaterialUI.Box,Typography=_MaterialUI.Typography,Chip=_MaterialUI.Chip,CloseIcon=_MaterialUI.CloseIcon,ShopingCartIcon=_MaterialUI.ShopingCartIcon,AddIcon=_MaterialUI.AddIcon,RemoveIcon=_MaterialUI.RemoveIcon,TextField=_MaterialUI.TextField,Snackbar=_MaterialUI.Snackbar,CircularProgress=_MaterialUI.CircularProgress,IconButton=_MaterialUI.IconButton,SvgIcon=_MaterialUI.SvgIcon,Badge=_MaterialUI.Badge,e=React.createElement,backendBaseUrl=TOKOONLINE_BASEURL,useStyles=makeStyles((function(e){return{heroContent:{marginTop:100,marginBottom:30,padding:20,background:"#fff"},sectionDesktop:_defineProperty({display:"none"},e.breakpoints.up("md"),{display:"flex"}),sectionMobile:_defineProperty({display:"flex"},e.breakpoints.up("md"),{display:"none"}),product_img_md:{width:400,height:400},product_empty_md:{width:400,height:400,background:"#A6ACAF"},product_img_xs:{width:300,height:300},product_empty_xs:{width:300,height:300,background:"#A6ACAF"},product_name:{marginTop:10,marginBottom:0,fontSize:24,fontWeight:700},product_detail:{margin:"2rem 1rem",textAlign:"justify"},statusLabel_01:{background:"#109607",color:"white",fontWeight:"700"},statusLabel_02:{background:"#F6D20B",color:"white",fontWeight:"700"},addToCartContainer:{background:"#F7F9F9",padding:"1rem"},priceContainer:{marginTop:10,marginBottom:0,color:"#AF1200",fontWeight:"bold",fontSize:"1.5rem"},inputRoot:{height:"2rem",color:"inherit",background:"#fff"},inputInput:_defineProperty({fontSize:"12px",padding:"1rem",transition:e.transitions.create("width"),width:"100%"},e.breakpoints.up("md"),{width:"1.5rem"}),btnActionRed:{margin:"1rem 1rem 2rem 0",fontSize:"0.7rem"},spesifikasiContainer:{margin:"0 0 1.5rem",padding:"2rem 2rem",background:"#fff"},spesifikasiTitleContainer:{background:"#D0D3D4",borderRadius:"1rem",padding:"1rem",margin:"1rem 0"},spesifikasiTitle:{fontWeight:"bold",fontSize:"1.2rem"},spesifikasi_table:{margin:"2rem 1rem"},bc_link:{color:"#D35400"},success_color:{background:"#357a38",color:"#fff",marginRight:"0.5rem"}}}));function App(){localStorage.getItem(TOKOONLINE_TOKOID)||localStorage.setItem(TOKOONLINE_TOKOID,""+(new Date).getTime());var e=useStyles(),t=React.useState({error:null,detailData:null,isRequest:!0}),a=_slicedToArray(t,2),n=a[0],i=a[1],r=React.useState({error:null,isRequest:!1}),o=_slicedToArray(r,2),c=(o[0],o[1]),l=function(e){var t=e.productId,a="mutation{addToCart(count:"+(0===m?1:m)+', toko_id: "'+TOKOONLINE_TOKOID+'", device_id: "xxxx", product_id: "'+t+'", session_id: "'+localStorage.getItem(TOKOONLINE_TOKOID)+'"){status,error,detail_data{_id,product_id{_id,name,\n                            code,\n                            price,\n                            description,\n                            image_id{\n                              _id,\n                              filename,\n                              file_type\n                            }\n                          }\n                          count,\n                          amount,\n                          device_id,\n                          session_id,\n                          toko_id{\n                            slug\n                          }\n                        }\n                      }\n                      }',n={method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({query:a})};fetch(backendBaseUrl+"/graphql",n).then((function(e){return e.json()})).then((function(e){return console.log("response===>",e),e.errors?alert(JSON.stringify(e.errors)):e.data.addToCart})).then((function(e){e&&(c({error:e.error,isRequest:!1}),e.error?alert(e.error):window.location.href=TOKOONLINE_PAGE_SHOPPING_CART)}))},d=React.useState(1),s=_slicedToArray(d,2),m=s[0],u=s[1],p=React.useCallback((function(){var e='query{\n        getDetailTokoProductJoinCartByCode(code: "'+window.location.hash.substring(1)+'", session_id: "'+localStorage.getItem(TOKOONLINE_TOKOID)+'"){\n        error,\n        status,\n        data_detail_in_cart{\n            count\n        },\n        data_detail{\n          _id,\n          name,\n          price,\n          code,\n          content1,\n          description,\n          image_id{\n            _id,\n            filename,\n            file_type\n          },\n            category_id{\n                _id,\n                title\n            }\n        }\n      }\n    }',t={method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({query:e})};fetch(backendBaseUrl+"/graphql",t).then((function(e){return e.json()})).then((function(e){return console.log("cat===>",JSON.stringify(e)),e.data.getDetailTokoProductJoinCartByCode})).then((function(e){i({cartDetail:e.data_detail_in_cart,detailData:e.data_detail,isRequest:!1,error:null}),u((e.data_detail_in_cart||{}).count||1)}))}),[]),g=(n.error,n.isRequest),_=n.detailData||{};React.useEffect((function(){p()}),[p]);var h,f=React.useState(!1),y=_slicedToArray(f,2),R=y[0],k=y[1],I=function(){k(!0)},E=React.useState(0),T=_slicedToArray(E,2);T[0],T[1];return React.createElement("div",null,n.isRequest?React.createElement(Grid,{container:!0,spacing:0,direction:"column",alignItems:"center",justify:"center",style:{minHeight:"100vh"}},React.createElement(CircularProgress,null)):React.createElement(Container,null,React.createElement(Snackbar,{anchorOrigin:{vertical:"bottom",horizontal:"left"},open:R,autoHideDuration:1e3,onClose:function(e,t){"clickaway"!==t&&k(!1)},message:"Berhasil ditambahkan"}),React.createElement("div",{className:e.heroContent},React.createElement(Grid,{container:!0,spacing:5,justify:"center"},React.createElement(Grid,{item:!0},React.createElement("div",{className:e.sectionDesktop},g?React.createElement(Skeleton,{variant:"rect",animation:"wave",width:400,height:400}):React.createElement(CardMedia,{className:e.product_img_md,image:backendBaseUrl+"/renderfile/"+(_.image_id||{}).filename+"."+(_.image_id||{}).file_type,title:"Image title"})),React.createElement("div",{className:e.sectionMobile},g?React.createElement(Skeleton,{variant:"rect",animation:"wave",width:300,height:300}):React.createElement(CardMedia,{className:e.product_img_md,image:backendBaseUrl+"/renderfile/"+(_.image_id||{}).filename+"."+(_.image_id||{}).file_type,title:"Image title"}))),React.createElement(Grid,{item:!0,xs:12,sm:6,md:4},React.createElement(Grid,{container:!0,spacing:2,direction:"row"},React.createElement(Grid,{item:!0},g?React.createElement(Skeleton,{animation:"wave",height:60,width:"5rem"}):React.createElement(Chip,{label:"Ada Stok"})),React.createElement(Grid,{item:!0},g?React.createElement(Skeleton,{animation:"wave",height:60,width:"5rem"}):(_.category_id||[]).map((function(t){return React.createElement(Chip,{key:t._id,label:t.title,className:e.success_color,onClick:function(){window.location.href=TOKOONLINE_PAGE_PRODUCT_CATALOG+"#"+t._id}})})))),React.createElement(Grid,{container:!0,spacing:2,direction:"column"},React.createElement(Typography,{className:e.product_name,component:"p"},g?React.createElement(Skeleton,{animation:"wave",height:50}):_.name),React.createElement(Typography,{className:e.priceContainer},g?React.createElement(Skeleton,{animation:"wave",height:50,width:"30%"}):(h=_.price||0,"Rp. "+h.toString().split("").reverse().join("").match(/\d{1,3}/g).join(".").split("").reverse().join(""))),React.createElement(Grid,{item:!0,style:{padding:0,marginTop:10}},React.createElement(Typography,{className:e.spesifikasiTitle}),React.createElement(Typography,{style:{marginBottom:10}},_.description)),React.createElement(Box,null,g?React.createElement(Skeleton,{animation:"wave",height:100}):React.createElement(Grid,{container:!0,className:e.addToCartContainer},React.createElement(Grid,{item:!0,xs:6,sm:6,md:6},React.createElement(Typography,{color:"textSecondary"},"Qty")),React.createElement(Grid,{item:!0,xs:6,sm:6,md:6},React.createElement(ButtonGroup,{disableElevation:!0,variant:"contained"},React.createElement(Button,{size:"small",onClick:function(){m>1&&u(m-1)}},"-"),React.createElement(TextField,{id:"outlined-size-small",value:m,variant:"outlined",type:"number",size:"small"}),React.createElement(Button,{size:"small",onClick:function(){u(m+1)}},"+"))))),React.createElement("div",{className:e.sectionDesktop},g?React.createElement(Skeleton,{animation:"wave",height:50,width:200,style:{marginRight:"1rem"}}):React.createElement(Button,{variant:"outlined",color:"primary",className:e.btnActionRed,onClick:function(){return function(e){var t=e.productId;if(!(m<1)){var a="mutation{addToCart(count:"+m+', toko_id: "'+TOKOONLINE_TOKOID+'", device_id: "xxxx", product_id: "'+t+'", session_id: "'+localStorage.getItem(TOKOONLINE_TOKOID)+'"){status,error,detail_data{_id,product_id{_id,name,\n                            code,\n                            price,\n                            description,\n                            image_id{\n                              _id,\n                              filename,\n                              file_type\n                            }\n                          }\n                          count,\n                          amount,\n                          device_id,\n                          session_id,\n                          toko_id{\n                            slug\n                          }\n                        }\n                      }\n                      }',n={method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({query:a})};fetch(backendBaseUrl+"/graphql",n).then((function(e){return e.json()})).then((function(e){return console.log("response===>",e),e.errors?alert(JSON.stringify(e.errors)):e.data.addToCart})).then((function(e){e&&(c({error:e.error,isRequest:!1}),e.error?alert(e.error):I())}))}}({productId:_._id})}},"Tambah ke keranjang"),g?React.createElement(Skeleton,{animation:"wave",height:50,width:150}):React.createElement(Button,{variant:"contained",color:"secondary",onClick:function(){return l({productId:_._id})},className:e.btnActionRed},"Beli Sekarang")),React.createElement("div",{className:e.sectionMobile},g?React.createElement(Skeleton,{animation:"wave",height:50,width:200,style:{marginRight:"1rem"}}):React.createElement(Button,{variant:"outlined",color:"secondary",className:e.btnActionRed},"Tambah ke keranjang"),g?React.createElement(Skeleton,{animation:"wave",height:50,width:150}):React.createElement(Button,{variant:"contained",color:"secondary",onClick:function(){return l({productId:_._id})},className:e.btnActionRed},"Beli Sekarang")))))),React.createElement("div",{className:e.spesifikasiContainer},React.createElement(Container,{className:e.spesifikasiTitleContainer},React.createElement(Typography,{className:e.spesifikasiTitle},"Deskripsi produk")),React.createElement("div",{className:e.product_detail,dangerouslySetInnerHTML:{__html:decodeURIComponent(_.content1)}}))))}ReactDOM.render(React.createElement(App,null),document.querySelector("#tokoonline_content"));