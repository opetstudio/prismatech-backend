"use strict";var _slicedToArray=function(e,t){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return function(e,t){var a=[],n=!0,r=!1,o=void 0;try{for(var i,l=e[Symbol.iterator]();!(n=(i=l.next()).done)&&(a.push(i.value),!t||a.length!==t);n=!0);}catch(e){r=!0,o=e}finally{try{!n&&l.return&&l.return()}finally{if(r)throw o}}return a}(e,t);throw new TypeError("Invalid attempt to destructure non-iterable instance")},_MaterialUI=MaterialUI,Button=_MaterialUI.Button,Card=_MaterialUI.Card,CardActions=_MaterialUI.CardActions,CardContent=_MaterialUI.CardContent,CardMedia=_MaterialUI.CardMedia,CssBaseline=_MaterialUI.CssBaseline,Grid=_MaterialUI.Grid,Typography=_MaterialUI.Typography,makeStyles=_MaterialUI.makeStyles,Container=_MaterialUI.Container,Fab=_MaterialUI.Fab,Badge=_MaterialUI.Badge,Snackbar=_MaterialUI.Snackbar,Alert=_MaterialUI.Alert,CardActionArea=_MaterialUI.CardActionArea,CircularProgress=_MaterialUI.CircularProgress,IconButton=_MaterialUI.IconButton,SvgIcon=_MaterialUI.SvgIcon,Chip=_MaterialUI.Chip,backendBaseUrl=TOKOONLINE_BASEURL,useStyles=makeStyles((function(e){return{mkPlinkCatIcon:{marginRight:e.spacing(2)},mkPlinkCatHeroContent:{backgroundColor:e.palette.background.paper,padding:e.spacing(8,0,6)},mkPlinkCatHeroButtons:{marginTop:e.spacing(4)},mkPlinkCatCardGrid:{},mkPlinkCatCard:{height:"100%",display:"flex",flexDirection:"column"},mkPlinkCatCardMedia:{paddingTop:"56.25%"},mkPlinkCatCardContent:{flexGrow:1},mkPlinkCatFabCart:{marginBottom:"0.5rem"},mkPlinkCatCustomHover:{"&:hover":{background:"#F6F6F6",color:"#212121"}},mkPlinkCatCustomButton:{"&:hover":{color:"#3F51B5"}},mkPlinkCatgToolbar:{borderBottom:"1px solid "+e.palette.divider},mkPlinkCatgToolbarTitle:{flex:1},mkPlinkCatgToolbarSecondary:{justifyContent:"space-between",overflowX:"auto",zIndex:3},mkPlinkCatgToolbarLink:{padding:e.spacing(1),flexShrink:0},mkPlinkCatgToolbarPrimary:{zIndex:3},mkPlinkCatgToolbarPrimaryBox:{},mkPlinkCatgToolbarPrimaryBoxGrid:{},chip:{margin:e.spacing(.5)}}})),fabPosition=document.getElementById("tokoonline_content").dataset.fabposition;function App(){localStorage.getItem(TOKOONLINE_TOKOID)||localStorage.setItem(TOKOONLINE_TOKOID,""+(new Date).getTime());var e=useStyles(),t=React.useState({error:null,listData:null,pageCount:0,pageIndex:0,pageSize:0,count:0,isRequest:!0}),a=_slicedToArray(t,2),n=a[0],r=a[1],o=React.useState({error:null,isRequest:!1}),i=_slicedToArray(o,2),l=(i[0],i[1]);console.log("category id===>",window.location.hash.substring(1));var c=React.useState(window.location.hash.substring(1)),s=_slicedToArray(c,2),d=s[0],m=s[1];window.addEventListener("popstate",(function(){console.log("location changed!"),m(window.location.hash.substring(1))}));var u=React.useCallback((function(e){var t=e.page,a=e.categoryId,n="";a&&(n='category_id: "'+a+'",');var o='query{\n      getAllTokoProductsByTokoId(\n        toko_id: "'+TOKOONLINE_TOKOID+'",\n        '+n+"\n        page_size: 9, \n        page_index: "+t+', \n        string_to_search: ""\n       ){\n        error,\n        count,\n        page_count,\n        status,\n        list_data{\n          _id,\n          name,\n          price,\n          code,\n          instock_label,\n          preorder_policy,\n          stock_amount,\n          description,\n          category_id{\n            _id,\n            title,   \n          },\n          image_id{\n            _id,\n            filename,\n            file_type\n          }\n        }\n      }\n    }',i={method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({query:o})};fetch(backendBaseUrl+"/graphql",i).then((function(e){return e.json()})).then((function(e){return console.log("response===>",e),e.data.getAllTokoProductsByTokoId})).then((function(e){return r({listData:e.list_data,pageCount:e.page_count,count:e.count,isRequest:!1})}))}),[]),g=React.useState(!1),p=_slicedToArray(g,2),C=p[0],k=p[1],_=function(){k(!0)},y=(n.error,n.count,n.pageCount,n.isRequest,n.listData),h=(n.pageIndex,n.pageSize,React.useState(0)),I=_slicedToArray(h,2),f=I[0],T=I[1];React.useEffect((function(){u({page:f,categoryId:d})}),[f,d]);var R=React.useState(0),E=_slicedToArray(R,2),b=(E[0],E[1],function(e){T(e?f+1:0===f?0:f-1)});return React.createElement("div",null,React.createElement(CssBaseline,null),n.isRequest?React.createElement(Grid,{container:!0,spacing:0,direction:"column",alignItems:"center",justify:"center",style:{minHeight:"100vh"}},React.createElement(CircularProgress,null)):React.createElement(Container,{className:e.mkPlinkCatCardGrid,maxWidth:"lg"},React.createElement(Grid,{container:!0,direction:"row",justify:"space-between",alignItems:"center"},React.createElement("h1",{style:{color:"#4B8BE2"}},"Catalog"),React.createElement(Badge,{style:{marginRight:11},onClick:function(){window.location.href=TOKOONLINE_PAGE_SHOPPING_CART},badgeContent:0,color:"secondary"},React.createElement(IconButton,{edge:"end","aria-label":"delete",style:{backgroundColor:"#4B8BE2"}},React.createElement(SvgIcon,{viewBox:"-3 0 512 512"},React.createElement("path",{fill:"#fff",d:"m147.925 379.116c-22.357-1.142-21.936-32.588-.001-33.68 62.135.216 226.021.058 290.132.103 17.535 0 32.537-11.933 36.481-29.017l36.404-157.641c2.085-9.026-.019-18.368-5.771-25.629s-14.363-11.484-23.626-11.484c-25.791 0-244.716-.991-356.849-1.438l-17.775-65.953c-4.267-15.761-18.65-26.768-34.978-26.768h-56.942c-8.284 0-15 6.716-15 15s6.716 15 15 15h56.942c2.811 0 5.286 1.895 6.017 4.592l68.265 253.276c-12.003.436-23.183 5.318-31.661 13.92-8.908 9.04-13.692 21.006-13.471 33.695.442 25.377 21.451 46.023 46.833 46.023h21.872c-3.251 6.824-5.076 14.453-5.076 22.501 0 28.95 23.552 52.502 52.502 52.502s52.502-23.552 52.502-52.502c0-8.049-1.826-15.677-5.077-22.501h94.716c-3.248 6.822-5.073 14.447-5.073 22.493 0 28.95 23.553 52.502 52.502 52.502 28.95 0 52.503-23.553 52.503-52.502 0-8.359-1.974-16.263-5.464-23.285 5.936-1.999 10.216-7.598 10.216-14.207 0-8.284-6.716-15-15-15zm91.799 52.501c0 12.408-10.094 22.502-22.502 22.502s-22.502-10.094-22.502-22.502c0-12.401 10.084-22.491 22.483-22.501h.038c12.399.01 22.483 10.1 22.483 22.501zm167.07 22.494c-12.407 0-22.502-10.095-22.502-22.502 0-12.285 9.898-22.296 22.137-22.493h.731c12.24.197 22.138 10.208 22.138 22.493-.001 12.407-10.096 22.502-22.504 22.502zm74.86-302.233c.089.112.076.165.057.251l-15.339 66.425h-51.942l8.845-67.023 58.149.234c.089.002.142.002.23.113zm-154.645 163.66v-66.984h53.202l-8.84 66.984zm-74.382 0-8.912-66.984h53.294v66.984zm-69.053 0h-.047c-3.656-.001-6.877-2.467-7.828-5.98l-16.442-61.004h54.193l8.912 66.984zm56.149-96.983-9.021-67.799 66.306.267v67.532zm87.286 0v-67.411l66.022.266-8.861 67.145zm-126.588-67.922 9.037 67.921h-58.287l-18.38-68.194zm237.635 164.905h-36.426l8.84-66.984h48.973l-14.137 61.217c-.784 3.396-3.765 5.767-7.25 5.767z"}))))),React.createElement(Snackbar,{anchorOrigin:{vertical:"bottom",horizontal:"left"},open:C,autoHideDuration:1e3,onClose:function(e,t){"clickaway"!==t&&k(!1)},message:"Berhasil ditambahkan"}),React.createElement(Grid,{container:!0,spacing:2},(y||[]).map((function(t,a){return"unavailable"!==t.preorder_policy?React.createElement(Grid,{item:!0,key:a,xs:6,sm:6,md:6,lg:4},React.createElement(Card,{className:e.mkPlinkCatCard},React.createElement(CardActionArea,{className:e.mkPlinkCatCustomHover,onClick:function(){window.location.href=TOKOONLINE_PAGE_PRODUCT_DETAIL+"#"+t.code}},React.createElement(CardMedia,{className:e.mkPlinkCatCardMedia,image:backendBaseUrl+"/renderfile/"+(t.image_id||{}).filename+"."+(t.image_id||{}).file_type,title:t.name}),React.createElement(Chip,{style:{marginTop:10,marginLeft:16},size:"small",color:"primary",label:0==t.stock_amount&&"preorder_policy"==t.preorder_policy?"Pre-Order":t.instock_label}),React.createElement(CardContent,{className:e.mkPlinkCatCardContent},React.createElement(Typography,{gutterBottom:!0,variant:"h6",noWrap:!0},t.name),React.createElement(Typography,null,(n=t.price,"Rp. "+n.toString().split("").reverse().join("").match(/\d{1,3}/g).join(".").split("").reverse().join(""))))),React.createElement(CardActions,null,React.createElement(Button,{onClick:function(){var e,a,n,r;e={productId:""+t._id},a=e.productId,n='mutation{addToCart( toko_id: "'+TOKOONLINE_TOKOID+'", device_id: "xxxx", product_id: "'+a+'", session_id: "'+localStorage.getItem(TOKOONLINE_TOKOID)+'"){status,error,detail_data{_id,product_id{_id,name,\n                          code,\n                          price,\n                          description,\n                          image_id{\n                            _id,\n                            filename,\n                            file_type\n                          }\n                        }\n                        count,\n                        device_id,\n                        session_id,\n                        toko_id{\n                          slug\n                        }\n                      }\n                    }\n                    }',r={method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({query:n})},fetch(backendBaseUrl+"/graphql",r).then((function(e){return e.json()})).then((function(e){return console.log("response===>",e),e.errors?alert(JSON.stringify(e.errors)):e.data.addToCart})).then((function(e){e&&(l({error:e.error,isRequest:!1}),e.error?alert(e.error):_())}))},size:"small",className:e.mkPlinkCatCustomButton,color:"primary"},"Add To Cart")))):"";var n}))),React.createElement(Grid,{container:!0,direction:"row",justify:"center",alignItems:"center"},React.createElement(IconButton,{onClick:function(){return b()},edge:"end","aria-label":"delete",style:{marginTop:20,marginRight:10}},React.createElement(SvgIcon,null,React.createElement("path",{d:"M0 12c0 6.627 5.373 12 12 12s12-5.373 12-12-5.373-12-12-12-12 5.373-12 12zm7.58 0l5.988-5.995 1.414 1.416-4.574 4.579 4.574 4.59-1.414 1.416-5.988-6.006z"}))),React.createElement("h4",{style:{marginTop:20,paddingTop:15}},f+1),React.createElement(IconButton,{onClick:function(){return b(!0)},edge:"end","aria-label":"delete",style:{marginTop:20,marginLeft:10}},React.createElement(SvgIcon,null,React.createElement("path",{d:"M12 0c-6.627 0-12 5.373-12 12s5.373 12 12 12 12-5.373 12-12-5.373-12-12-12zm-1.568 18.005l-1.414-1.415 4.574-4.59-4.574-4.579 1.414-1.416 5.988 5.995-5.988 6.005z"}))))))}ReactDOM.render(React.createElement(App,null),document.querySelector("#tokoonline_content"));