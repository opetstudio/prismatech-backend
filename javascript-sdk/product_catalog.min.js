"use strict";var _slicedToArray=function(e,t){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return function(e,t){var a=[],n=!0,r=!1,o=void 0;try{for(var i,c=e[Symbol.iterator]();!(n=(i=c.next()).done)&&(a.push(i.value),!t||a.length!==t);n=!0);}catch(e){r=!0,o=e}finally{try{!n&&c.return&&c.return()}finally{if(r)throw o}}return a}(e,t);throw new TypeError("Invalid attempt to destructure non-iterable instance")},_MaterialUI=MaterialUI,Button=_MaterialUI.Button,Card=_MaterialUI.Card,CardActions=_MaterialUI.CardActions,CardContent=_MaterialUI.CardContent,CardMedia=_MaterialUI.CardMedia,CssBaseline=_MaterialUI.CssBaseline,Grid=_MaterialUI.Grid,Typography=_MaterialUI.Typography,makeStyles=_MaterialUI.makeStyles,Container=_MaterialUI.Container,Fab=_MaterialUI.Fab,Badge=_MaterialUI.Badge,Snackbar=_MaterialUI.Snackbar,Alert=_MaterialUI.Alert,CardActionArea=_MaterialUI.CardActionArea,CircularProgress=_MaterialUI.CircularProgress,IconButton=_MaterialUI.IconButton,SvgIcon=_MaterialUI.SvgIcon,backendBaseUrl=TOKOONLINE_BASEURL,useStyles=makeStyles((function(e){return{icon:{marginRight:e.spacing(2)},heroContent:{backgroundColor:e.palette.background.paper,padding:e.spacing(8,0,6)},heroButtons:{marginTop:e.spacing(4)},cardGrid:{paddingTop:e.spacing(8),paddingBottom:e.spacing(8)},card:{height:"100%",flexDirection:"column"},cardMedia:{paddingTop:"56.25%"},cardContent:{flexGrow:1},footer:{backgroundColor:e.palette.background.paper,padding:e.spacing(6)},fabCart:{display:"flex",alignItems:"center",justifyContent:"center"},customHover:{"&:hover":{background:"#F6F6F6"}},customButton:{"&:hover":{color:"#3F51B5"}}}}));function App(){localStorage.getItem(TOKOONLINE_TOKOID)||localStorage.setItem(TOKOONLINE_TOKOID,""+(new Date).getTime());var e=useStyles(),t=React.useState({error:null,listData:null,pageCount:0,pageIndex:0,pageSize:0,count:0,isRequest:!0}),a=_slicedToArray(t,2),n=a[0],r=a[1],o=React.useState({error:null,isRequest:!1}),i=_slicedToArray(o,2),c=(i[0],i[1]);console.log("category id===>",window.location.hash.substring(1));var l=React.useState(window.location.hash.substring(1)),d=_slicedToArray(l,2),s=d[0],u=d[1];window.addEventListener("popstate",(function(){console.log("location changed!"),u(window.location.hash.substring(1))}));var g=React.useCallback((function(e){var t=e.page,a=e.categoryId,n="";a&&(n='category_id: "'+a+'",');var o='query{\n      getAllTokoProductsByTokoId(\n        toko_id: "'+TOKOONLINE_TOKOID+'",\n        '+n+"\n        page_size: 9, \n        page_index: "+t+', \n        string_to_search: ""\n       ){\n        error,\n        count,\n        page_count,\n        status,\n        list_data{\n          _id,\n          name,\n          price,\n          code,\n          description,\n          category_id{\n            _id,\n            title,   \n          },\n          image_id{\n            _id,\n            filename,\n            file_type\n          }\n        }\n      }\n    }',i={method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({query:o})};fetch(backendBaseUrl+"/graphql",i).then((function(e){return e.json()})).then((function(e){return console.log("response===>",e),e.data.getAllTokoProductsByTokoId})).then((function(e){return r({listData:e.list_data,pageCount:e.page_count,count:e.count,isRequest:!1})}))}),[]),m=React.useState(!1),p=_slicedToArray(m,2),_=p[0],y=p[1],I=function(){y(!0)},f=(n.error,n.count,n.pageCount,n.isRequest,n.listData),h=(n.pageIndex,n.pageSize,React.useState(0)),C=_slicedToArray(h,2),R=C[0],T=C[1];React.useEffect((function(){g({page:R,categoryId:s})}),[R,s]);var E=React.useState(0),O=_slicedToArray(E,2),S=O[0],k=(O[1],function(e){T(e?R+1:0===R?0:R-1)});return React.createElement("div",null,React.createElement(CssBaseline,null),n.isRequest?React.createElement(Grid,{container:!0,spacing:0,direction:"column",alignItems:"center",justify:"center",style:{minHeight:"100vh"}},React.createElement(CircularProgress,null)):React.createElement(Container,{className:e.cardGrid,maxWidth:"md"},React.createElement(Grid,{container:!0,direction:"row",justify:"flex-end",alignItems:"flex-end"},React.createElement(Badge,{onClick:function(){window.location.href=TOKOONLINE_PAGE_SHOPPING_CART},badgeContent:S,color:"secondary",style:{position:"fixed",zIndex:2}},React.createElement(IconButton,{edge:"end","aria-label":"delete",style:{marginTop:-2,marginRight:-5,backgroundColor:"#efefef"}},React.createElement(SvgIcon,null,React.createElement("path",{d:"M10 19.5c0 .829-.672 1.5-1.5 1.5s-1.5-.671-1.5-1.5c0-.828.672-1.5 1.5-1.5s1.5.672 1.5 1.5zm3.5-1.5c-.828 0-1.5.671-1.5 1.5s.672 1.5 1.5 1.5 1.5-.671 1.5-1.5c0-.828-.672-1.5-1.5-1.5zm1.336-5l1.977-7h-16.813l2.938 7h11.898zm4.969-10l-3.432 12h-12.597l.839 2h13.239l3.474-12h1.929l.743-2h-4.195z"}))))),React.createElement(Snackbar,{anchorOrigin:{vertical:"bottom",horizontal:"left"},open:_,autoHideDuration:1e3,onClose:function(e,t){"clickaway"!==t&&y(!1)},message:"Berhasil ditambahkan"}),React.createElement(Grid,{container:!0,spacing:2},(f||[]).map((function(t,a){return React.createElement(Grid,{item:!0,key:a,xs:12,sm:6,md:4},React.createElement(Card,{className:e.card},React.createElement(CardActionArea,{className:e.customHover,onClick:function(){window.location.href=TOKOONLINE_PAGE_PRODUCT_DETAIL+"#"+t.code}},React.createElement(CardMedia,{className:e.cardMedia,image:backendBaseUrl+"/renderfile/"+(t.image_id||{}).filename+"."+(t.image_id||{}).file_type,title:t.name}),React.createElement(CardContent,{className:e.cardContent},React.createElement(Typography,{gutterBottom:!0,variant:"h6",noWrap:!0},t.name),React.createElement(Typography,null,(n=t.price,"Rp. "+n.toString().split("").reverse().join("").match(/\d{1,3}/g).join(".").split("").reverse().join(""))))),React.createElement(CardActions,null,React.createElement(Button,{onClick:function(){var e,a,n,r;e={productId:""+t._id},a=e.productId,n='mutation{addToCart( toko_id: "'+TOKOONLINE_TOKOID+'", device_id: "xxxx", product_id: "'+a+'", session_id: "'+localStorage.getItem(TOKOONLINE_TOKOID)+'"){status,error,detail_data{_id,product_id{_id,name,\n                          code,\n                          price,\n                          description,\n                          image_id{\n                            _id,\n                            filename,\n                            file_type\n                          }\n                        }\n                        count,\n                        device_id,\n                        session_id,\n                        toko_id{\n                          slug\n                        }\n                      }\n                    }\n                    }',r={method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({query:n})},fetch(backendBaseUrl+"/graphql",r).then((function(e){return e.json()})).then((function(e){return console.log("response===>",e),e.errors?alert(JSON.stringify(e.errors)):e.data.addToCart})).then((function(e){e&&(c({error:e.error,isRequest:!1}),e.error?alert(e.error):I())}))},size:"small",className:e.customButton,color:"primary"},"Add To Cart"))));var n}))),React.createElement(Grid,{container:!0,direction:"row",justify:"center",alignItems:"center"},React.createElement(IconButton,{onClick:function(){return k()},edge:"end","aria-label":"delete",style:{marginTop:20,marginRight:10}},React.createElement(SvgIcon,null,React.createElement("path",{d:"M0 12c0 6.627 5.373 12 12 12s12-5.373 12-12-5.373-12-12-12-12 5.373-12 12zm7.58 0l5.988-5.995 1.414 1.416-4.574 4.579 4.574 4.59-1.414 1.416-5.988-6.006z"}))),React.createElement("h4",{style:{marginTop:20,paddingTop:15}},R+1),React.createElement(IconButton,{onClick:function(){return k(!0)},edge:"end","aria-label":"delete",style:{marginTop:20,marginLeft:10}},React.createElement(SvgIcon,null,React.createElement("path",{d:"M12 0c-6.627 0-12 5.373-12 12s5.373 12 12 12 12-5.373 12-12-5.373-12-12-12zm-1.568 18.005l-1.414-1.415 4.574-4.59-4.574-4.579 1.414-1.416 5.988 5.995-5.988 6.005z"}))))))}ReactDOM.render(React.createElement(App,null),document.querySelector("#tokoonline_content"));