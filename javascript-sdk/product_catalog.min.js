"use strict";var _slicedToArray=function(e,t){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return function(e,t){var a=[],n=!0,r=!1,o=void 0;try{for(var i,l=e[Symbol.iterator]();!(n=(i=l.next()).done)&&(a.push(i.value),!t||a.length!==t);n=!0);}catch(e){r=!0,o=e}finally{try{!n&&l.return&&l.return()}finally{if(r)throw o}}return a}(e,t);throw new TypeError("Invalid attempt to destructure non-iterable instance")},_MaterialUI=MaterialUI,Button=_MaterialUI.Button,Card=_MaterialUI.Card,CardActions=_MaterialUI.CardActions,CardContent=_MaterialUI.CardContent,CardMedia=_MaterialUI.CardMedia,CssBaseline=_MaterialUI.CssBaseline,Grid=_MaterialUI.Grid,Typography=_MaterialUI.Typography,makeStyles=_MaterialUI.makeStyles,Container=_MaterialUI.Container,Fab=_MaterialUI.Fab,Badge=_MaterialUI.Badge,Snackbar=_MaterialUI.Snackbar,Alert=_MaterialUI.Alert,CardActionArea=_MaterialUI.CardActionArea,CircularProgress=_MaterialUI.CircularProgress,IconButton=_MaterialUI.IconButton,SvgIcon=_MaterialUI.SvgIcon,backendBaseUrl=TOKOONLINE_BASEURL,useStyles=makeStyles((function(e){return{mkPlinkCatIcon:{marginRight:e.spacing(2)},mkPlinkCatHeroContent:{backgroundColor:e.palette.background.paper,padding:e.spacing(8,0,6)},mkPlinkCatHeroButtons:{marginTop:e.spacing(4)},mkPlinkCatCardGrid:{padding:e.spacing(4)},mkPlinkCatCard:{height:"100%",display:"flex",flexDirection:"column"},mkPlinkCatCardMedia:{paddingTop:"56.25%"},mkPlinkCatCardContent:{flexGrow:1},mkPlinkCatFabCart:{marginBottom:"0.5rem"},mkPlinkCatCustomHover:{"&:hover":{background:"#F6F6F6",color:"#212121"}},mkPlinkCatCustomButton:{"&:hover":{color:"#3F51B5"}},mkPlinkCatgToolbar:{borderBottom:"1px solid "+e.palette.divider},mkPlinkCatgToolbarTitle:{flex:1},mkPlinkCatgToolbarSecondary:{justifyContent:"space-between",overflowX:"auto",zIndex:3},mkPlinkCatgToolbarLink:{padding:e.spacing(1),flexShrink:0},mkPlinkCatgToolbarPrimary:{zIndex:3},mkPlinkCatgToolbarPrimaryBox:{backgroundColor:"light"===e.palette.type?e.palette.grey[200]:e.palette.grey[800]},mkPlinkCatgToolbarPrimaryBoxGrid:{marginTop:e.spacing(3)},chip:{margin:e.spacing(.5)}}})),tokoonline_category_style=parseInt(document.getElementById("tokoonline_category").dataset.catgtype),fabPosition=document.getElementById("tokoonline_content").dataset.fabposition;function App(){localStorage.getItem(TOKOONLINE_TOKOID)||localStorage.setItem(TOKOONLINE_TOKOID,""+(new Date).getTime());var e=useStyles(),t=React.useState({error:null,listData:null,pageCount:0,pageIndex:0,pageSize:0,count:0,isRequest:!0}),a=_slicedToArray(t,2),n=a[0],r=a[1],o=React.useState({error:null,isRequest:!1}),i=_slicedToArray(o,2),l=(i[0],i[1]);console.log("category id===>",window.location.hash.substring(1));var c=React.useState(window.location.hash.substring(1)),d=_slicedToArray(c,2),s=d[0],m=d[1];window.addEventListener("popstate",(function(){console.log("location changed!"),m(window.location.hash.substring(1))}));var u=React.useCallback((function(e){var t=e.page,a=e.categoryId,n="";a&&(n='category_id: "'+a+'",');var o='query{\n      getAllTokoProductsByTokoId(\n        toko_id: "'+TOKOONLINE_TOKOID+'",\n        '+n+"\n        page_size: 9, \n        page_index: "+t+', \n        string_to_search: ""\n       ){\n        error,\n        count,\n        page_count,\n        status,\n        list_data{\n          _id,\n          name,\n          price,\n          code,\n          description,\n          category_id{\n            _id,\n            title,   \n          },\n          image_id{\n            _id,\n            filename,\n            file_type\n          }\n        }\n      }\n    }',i={method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({query:o})};fetch(backendBaseUrl+"/graphql",i).then((function(e){return e.json()})).then((function(e){return console.log("response===>",e),e.data.getAllTokoProductsByTokoId})).then((function(e){return r({listData:e.list_data,pageCount:e.page_count,count:e.count,isRequest:!1})}))}),[]),g=React.useState(!1),p=_slicedToArray(g,2),C=p[0],k=p[1],y=function(){k(!0)},_=(n.error,n.count,n.pageCount,n.isRequest,n.listData),f=(n.pageIndex,n.pageSize,React.useState(0)),I=_slicedToArray(f,2),h=I[0],T=I[1];React.useEffect((function(){u({page:h,categoryId:s})}),[h,s]);var R=React.useState(0),E=_slicedToArray(R,2),b=(E[0],E[1],function(e){T(e?h+1:0===h?0:h-1)});return React.createElement("div",null,React.createElement(CssBaseline,null),n.isRequest?React.createElement(Grid,{container:!0,spacing:0,direction:"column",alignItems:"center",justify:"center",style:{minHeight:"100vh"}},React.createElement(CircularProgress,null)):React.createElement(Container,{className:e.mkPlinkCatCardGrid,maxWidth:"lg"},React.createElement(Grid,{container:!0,direction:"row",justify:"left"==fabPosition?"flex-start":"flex-end",alignItems:"flex-end",className:e.mkPlinkCatFabCart},React.createElement(Badge,{onClick:function(){window.location.href=TOKOONLINE_PAGE_SHOPPING_CART},badgeContent:0,color:"secondary"},React.createElement(IconButton,{edge:"end","aria-label":"delete",style:{marginTop:-2,marginRight:-5,backgroundColor:"#efefef"}},React.createElement(SvgIcon,null,React.createElement("path",{d:"M10 19.5c0 .829-.672 1.5-1.5 1.5s-1.5-.671-1.5-1.5c0-.828.672-1.5 1.5-1.5s1.5.672 1.5 1.5zm3.5-1.5c-.828 0-1.5.671-1.5 1.5s.672 1.5 1.5 1.5 1.5-.671 1.5-1.5c0-.828-.672-1.5-1.5-1.5zm1.336-5l1.977-7h-16.813l2.938 7h11.898zm4.969-10l-3.432 12h-12.597l.839 2h13.239l3.474-12h1.929l.743-2h-4.195z"}))))),React.createElement(Snackbar,{anchorOrigin:{vertical:"bottom",horizontal:"left"},open:C,autoHideDuration:1e3,onClose:function(e,t){"clickaway"!==t&&k(!1)},message:"Berhasil ditambahkan"}),React.createElement(Grid,{container:!0,spacing:2},(_||[]).map((function(t,a){return React.createElement(Grid,{item:!0,key:a,xs:6,sm:6,md:6,lg:4},React.createElement(Card,{className:e.mkPlinkCatCard},React.createElement(CardActionArea,{className:e.mkPlinkCatCustomHover,onClick:function(){window.location.href=TOKOONLINE_PAGE_PRODUCT_DETAIL+"#"+t.code}},React.createElement(CardMedia,{className:e.mkPlinkCatCardMedia,image:backendBaseUrl+"/renderfile/"+(t.image_id||{}).filename+"."+(t.image_id||{}).file_type,title:t.name}),React.createElement(CardContent,{className:e.mkPlinkCatCardContent},React.createElement(Typography,{gutterBottom:!0,variant:"h6",noWrap:!0},t.name),React.createElement(Typography,null,(n=t.price,"Rp. "+n.toString().split("").reverse().join("").match(/\d{1,3}/g).join(".").split("").reverse().join(""))))),React.createElement(CardActions,null,React.createElement(Button,{onClick:function(){var e,a,n,r;e={productId:""+t._id},a=e.productId,n='mutation{addToCart( toko_id: "'+TOKOONLINE_TOKOID+'", device_id: "xxxx", product_id: "'+a+'", session_id: "'+localStorage.getItem(TOKOONLINE_TOKOID)+'"){status,error,detail_data{_id,product_id{_id,name,\n                          code,\n                          price,\n                          description,\n                          image_id{\n                            _id,\n                            filename,\n                            file_type\n                          }\n                        }\n                        count,\n                        device_id,\n                        session_id,\n                        toko_id{\n                          slug\n                        }\n                      }\n                    }\n                    }',r={method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({query:n})},fetch(backendBaseUrl+"/graphql",r).then((function(e){return e.json()})).then((function(e){return console.log("response===>",e),e.errors?alert(JSON.stringify(e.errors)):e.data.addToCart})).then((function(e){e&&(l({error:e.error,isRequest:!1}),e.error?alert(e.error):y())}))},size:"small",className:e.mkPlinkCatCustomButton,color:"primary"},"Add To Cart"))));var n}))),React.createElement(Grid,{container:!0,direction:"row",justify:"center",alignItems:"center"},React.createElement(IconButton,{onClick:function(){return b()},edge:"end","aria-label":"delete",style:{marginTop:20,marginRight:10}},React.createElement(SvgIcon,null,React.createElement("path",{d:"M0 12c0 6.627 5.373 12 12 12s12-5.373 12-12-5.373-12-12-12-12 5.373-12 12zm7.58 0l5.988-5.995 1.414 1.416-4.574 4.579 4.574 4.59-1.414 1.416-5.988-6.006z"}))),React.createElement("h4",{style:{marginTop:20,paddingTop:15}},h+1),React.createElement(IconButton,{onClick:function(){return b(!0)},edge:"end","aria-label":"delete",style:{marginTop:20,marginLeft:10}},React.createElement(SvgIcon,null,React.createElement("path",{d:"M12 0c-6.627 0-12 5.373-12 12s5.373 12 12 12 12-5.373 12-12-5.373-12-12-12zm-1.568 18.005l-1.414-1.415 4.574-4.59-4.574-4.579 1.414-1.416 5.988 5.995-5.988 6.005z"}))))))}ReactDOM.render(React.createElement(App,null),document.querySelector("#tokoonline_content"));